{"ast":null,"code":"var _jsxFileName = \"/Users/anuraghodke/Documents/Job Apps/Instalily Inc./case-study/src/components/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './ChatWindow.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  partData,\n  onProductSelect,\n  selectedChat,\n  onMessagesUpdate\n}) => {\n  _s();\n  const [messages, setMessages] = useState(selectedChat ? selectedChat.messages : []);\n  const [input, setInput] = useState('');\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    if (selectedChat) {\n      setMessages(selectedChat.messages);\n    } else {\n      setMessages([]);\n    }\n  }, [selectedChat]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  useEffect(() => {\n    // Update the parent component whenever messages change\n    if (messages.length > 0) {\n      onMessagesUpdate(messages);\n    }\n  }, [messages, onMessagesUpdate]);\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage = {\n      text: input,\n      sender: 'user'\n    };\n    setMessages([...messages, userMessage]);\n    setInput('');\n\n    // Debug: Log the raw input\n    console.log('Raw user input:', input);\n\n    // Extract part numbers from the message (e.g., PS12364199), case-insensitive\n    const partNumberRegex = /PS\\d+/gi;\n    const partNumbers = input.match(partNumberRegex) || [];\n    console.log('Extracted part numbers:', partNumbers);\n\n    // Debug: Log the partData object and its keys\n    console.log('partData:', partData);\n    console.log('partData keys:', Object.keys(partData));\n\n    // Debug: Check each part number against partData\n    const validPartNumbers = partNumbers.filter(pn => {\n      const isValid = partData[pn];\n      console.log(`Checking part number \"${pn}\":`, isValid ? 'Found' : 'Not found');\n      return isValid;\n    });\n    console.log('Valid part numbers:', validPartNumbers);\n    if (validPartNumbers.length > 0) {\n      const botMessage = {\n        text: 'Here are the parts I found:',\n        sender: 'bot',\n        partNumbers: validPartNumbers\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Select the first product to display in the sidebar\n      const firstProduct = partData[validPartNumbers[0]];\n      console.log('Selected product:', firstProduct); // Debug log\n      onProductSelect(firstProduct);\n    } else {\n      const botMessage = {\n        text: 'I couldn’t find any parts matching that number. Please try again or contact support at ' + (partData[\"Support Phone Number\"] || '1-888-738-4871') + '.',\n        sender: 'bot'\n      };\n      setMessages(prev => [...prev, botMessage]);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSendMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sparkles\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ask our Bot anything\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this) : messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.sender}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [message.text, message.partNumbers && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"part-numbers\",\n            children: message.partNumbers.map((partNumber, idx) => {\n              const product = partData[partNumber];\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-link\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onProductSelect(product),\n                  children: product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 27\n                }, this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"order-support-btn\",\n        children: \"\\u2728 Order Support\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: handleKeyPress,\n        placeholder: \"My next question goes here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        children: \"\\u27A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"Zw3T9JbGp/DEz4Z1yWiIydHLOpc=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatWindow","partData","onProductSelect","selectedChat","onMessagesUpdate","_s","messages","setMessages","input","setInput","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","length","handleSendMessage","trim","userMessage","text","sender","console","log","partNumberRegex","partNumbers","match","Object","keys","validPartNumbers","filter","pn","isValid","botMessage","prev","firstProduct","handleKeyPress","e","key","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","message","index","partNumber","idx","product","onClick","name","ref","type","value","onChange","target","onKeyPress","placeholder","_c","$RefreshReg$"],"sources":["/Users/anuraghodke/Documents/Job Apps/Instalily Inc./case-study/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './ChatWindow.css';\n\nconst ChatWindow = ({ partData, onProductSelect, selectedChat, onMessagesUpdate }) => {\n  const [messages, setMessages] = useState(selectedChat ? selectedChat.messages : []);\n  const [input, setInput] = useState('');\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    if (selectedChat) {\n      setMessages(selectedChat.messages);\n    } else {\n      setMessages([]);\n    }\n  }, [selectedChat]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    // Update the parent component whenever messages change\n    if (messages.length > 0) {\n      onMessagesUpdate(messages);\n    }\n  }, [messages, onMessagesUpdate]);\n\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { text: input, sender: 'user' };\n    setMessages([...messages, userMessage]);\n    setInput('');\n\n    // Debug: Log the raw input\n    console.log('Raw user input:', input);\n\n    // Extract part numbers from the message (e.g., PS12364199), case-insensitive\n    const partNumberRegex = /PS\\d+/gi;\n    const partNumbers = input.match(partNumberRegex) || [];\n    console.log('Extracted part numbers:', partNumbers);\n\n    // Debug: Log the partData object and its keys\n    console.log('partData:', partData);\n    console.log('partData keys:', Object.keys(partData));\n\n    // Debug: Check each part number against partData\n    const validPartNumbers = partNumbers.filter(pn => {\n      const isValid = partData[pn];\n      console.log(`Checking part number \"${pn}\":`, isValid ? 'Found' : 'Not found');\n      return isValid;\n    });\n    console.log('Valid part numbers:', validPartNumbers);\n\n    if (validPartNumbers.length > 0) {\n      const botMessage = {\n        text: 'Here are the parts I found:',\n        sender: 'bot',\n        partNumbers: validPartNumbers,\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Select the first product to display in the sidebar\n      const firstProduct = partData[validPartNumbers[0]];\n      console.log('Selected product:', firstProduct); // Debug log\n      onProductSelect(firstProduct);\n    } else {\n      const botMessage = {\n        text: 'I couldn’t find any parts matching that number. Please try again or contact support at ' + (partData[\"Support Phone Number\"] || '1-888-738-4871') + '.',\n        sender: 'bot',\n      };\n      setMessages(prev => [...prev, botMessage]);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSendMessage();\n    }\n  };\n\n  return (\n    <div className=\"chat-window\">\n      <div className=\"chat-messages\">\n        {messages.length === 0 ? (\n          <div className=\"welcome-message\">\n            <div className=\"sparkles\">✨</div>\n            <h2>Ask our Bot anything</h2>\n          </div>\n        ) : (\n          messages.map((message, index) => (\n            <div key={index} className={`message ${message.sender}`}>\n              <div className=\"message-content\">\n                {message.text}\n                {message.partNumbers && (\n                  <div className=\"part-numbers\">\n                    {message.partNumbers.map((partNumber, idx) => {\n                      const product = partData[partNumber];\n                      return (\n                        <div key={idx} className=\"product-link\">\n                          <button onClick={() => onProductSelect(product)}>\n                            {product.name}\n                          </button>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n      <div className=\"chat-input\">\n        <button className=\"order-support-btn\">✨ Order Support</button>\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyPress={handleKeyPress}\n          placeholder=\"My next question goes here\"\n        />\n        <button onClick={handleSendMessage}>➤</button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}